{"data":{"site":{"siteMetadata":{"title":"relevant programmer","author":"Ashok Dudhade"}},"markdownRemark":{"id":"f4b15c9d-c2a0-50e2-9315-5d8db45c5b14","excerpt":"Prerequisites: Nodejs yarn create-react-app There are so many posts available for creating react app with yarn workspaces, but I have notâ€¦","html":"<p>Prerequisites:</p>\n<ul>\n<li>Nodejs</li>\n<li>yarn</li>\n<li>create-react-app</li>\n</ul>\n<p>There are so many posts available for creating react app with yarn workspaces, but I have not came across any article with typescript.</p>\n<p>To create a sample app we will use <code class=\"language-text\">create-react-app</code> utility.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">create-react-app typescript-react-yarn-worspaces --scripts-version<span class=\"token operator\">=</span>react-scripts-ts</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd typescript-react-yarn-worspaces</code></pre></div>\n<p>Eject app to unpack all configuration files into our application</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn eject</code></pre></div>\n<p>It will display a message \"Are you sure you want to eject? This action is permanent.\" Press 'y' to confirm. It should unpack configuration files.</p>\n<p><code class=\"language-text\"></code></p>\n<p>Why yarn workspaces?</p>\n<p>Multiple reusable packages can be adding in single repository which can depend on each other with single yarn lock file at root directory. This also has benefit of always referring to latest package source code.</p>\n<p>Open new 'typescript-react-yarn-worspaces' directory in your favorite IDE.</p>\n<p>Create a directory for packages at root level (<code class=\"language-text\">typescript-react-yarn-worspaces\\packages</code>).</p>\n<p>Open package.json file and add worspaces details.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;workspaces&quot;: [&quot;packages/*&quot;]</code></pre></div>\n<p>Modify webpack configuration to include \"packages\" directory in build and watch.</p>\n<p>Add packagesSrc in paths.js file. (\"typescript-react-yarn-worspaces/config/paths.js\")</p>\n<p><img src=\"./paths-01.png\" alt=\"packages source entry\"></p>\n<p>Modify webpack.config.dev.js to include packages directory.(typescript-react-yarn-worspaces/config/webpack.config.dev.js)</p>\n<p><img src=\"./dev-01.png\" alt=\"dev 01\"></p>\n<p><img src=\"./dev-02.png\" alt=\"dev 02\"></p>\n<p><img src=\"./dev-03.png\" alt=\"dev 03\"></p>\n<p><img src=\"./dev-04.png\" alt=\"dev 04\"></p>\n<p>Modify webpack.config.prod.js to include packages directory.(typescript-react-yarn-worspaces/config/webpack.config.prod.js)</p>\n<p><img src=\"./prod-01.png\" alt=\"prod 01\">\n<img src=\"./prod-02.png\" alt=\"prod 02\">\n<img src=\"./prod-03.png\" alt=\"prod 03\"></p>\n<p>Now let's create a reusable \"Header\" component for the application. Create a 'header' directory inside packages(<code class=\"language-text\">typescript-react-yarn-worspaces\\packages\\header</code>) and add below files.</p>\n<p>Add package.json file(<code class=\"language-text\">typescript-react-yarn-worspaces\\packages\\header\\package.json</code>).</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n    &quot;name&quot;: &quot;@my-app/header&quot;,\n    &quot;version&quot;: &quot;0.1.0&quot;,\n    &quot;private&quot;: true,\n    &quot;dependencies&quot;: {\n        &quot;react&quot;: &quot;^16.5.2&quot;,\n        &quot;react-dom&quot;: &quot;^16.5.2&quot;\n    },\n    &quot;devDependencies&quot;: {\n        &quot;@types/node&quot;: &quot;^10.11.4&quot;,\n        &quot;@types/react&quot;: &quot;^16.4.16&quot;,\n        &quot;@types/react-dom&quot;: &quot;^16.0.8&quot;,\n        &quot;typescript&quot;: &quot;^3.1.1&quot;\n    }\n}</code></pre></div>\n<p>Add index.tsx file(<code class=\"language-text\">typescript-react-yarn-worspaces\\packages\\header\\index.tsx</code>).</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import * as React from &#39;react&#39;;\nimport &#39;./App.css&#39;;\n\nexport class Header extends React.Component {\n  public render() {\n    return (\n        &lt;header className=&quot;App-header&quot;&gt;\n          &lt;h1 className=&quot;App-title&quot;&gt;Header from packages&lt;/h1&gt;\n        &lt;/header&gt;\n    );\n  }\n}</code></pre></div>\n<p>Modify root package json to add header package dependency along with App.tsx file.</p>\n<p>package.json dependency</p>\n<p><img src=\"./package-json.png\" alt=\"package-json\"></p>\n<p>App.tsx</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import { Header } from &#39;@my-app/header&#39;;\nimport * as React from &#39;react&#39;;\nimport &#39;./App.css&#39;;\n\nclass App extends React.Component {\n  public render() {\n    return (\n      &lt;div className=&quot;App&quot;&gt;\n        &lt;Header/&gt;\n        &lt;p className=&quot;App-intro&quot;&gt;\n          To get started, edit &lt;code&gt;src/App.tsx&lt;/code&gt; and save to reload.\n        &lt;/p&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default App;</code></pre></div>\n<p>To start app do as below.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yarn install\nyarn start</code></pre></div>\n<p>Code is available at <a href=\"https://github.com/ashokdudhade/typescript-react-yarn-worspaces\">github</a></p>","frontmatter":{"title":"Typescript react app with yarn workspaces","date":"October 09, 2018"}}},"pageContext":{"slug":"/typescript-react-app-with-yarn-worspaces/","previous":{"fields":{"slug":"/docker-for-programmers/"},"frontmatter":{"title":"Docker for programmers"}},"next":null}}